!function(e){var t={treshold:4,maximumItems:5,highlightTyped:!0,highlightClass:"text-primary"};function o(e,t,o){var a;if(o.highlightTyped){var l=t.label.toLowerCase().indexOf(e.toLowerCase());a=t.label.substring(0,l)+'<span class="'+o.highlightClass+'">'+t.label.substring(l,l+e.length)+"</span>"+t.label.substring(l+e.length,t.label.length)}else a=t.label;return'<button type="button" class="dropdown-item" data-value="'+t.value+'">'+a+"</button>"}function a(t,a){var l=t.val();if(l.length<a.treshold)return t.dropdown("hide"),0;var n=t.next();n.html("");for(var r=0,d=Object.keys(a.source),i=0;i<d.length;i++){var s=d[i],p=a.source[s],u={label:a.label?p[a.label]:s,value:a.value?p[a.value]:p};if(u.label.toLowerCase().indexOf(l.toLowerCase())>=0&&(n.append(o(l,u,a)),++r>=a.maximumItems))break}return t.next().find(".dropdown-item").click(function(){t.val(e(this).text()),a.onSelectItem&&a.onSelectItem({value:e(this).data("value"),label:e(this).text()},t[0])}),n.children().length}e.fn.autocomplete=function(o){var l={};e.extend(l,t,o);var n=e(this);return n.parent().removeClass("dropdown"),n.removeAttr("data-toggle"),n.removeClass("dropdown-toggle"),n.parent().find(".dropdown-menu").remove(),n.dropdown("dispose"),n.parent().addClass("dropdown"),n.attr("data-toggle","dropdown"),n.attr("aria-haspopup","true"),n.attr("aria-expanded","true"),n.addClass("dropdown-toggle"),n.after('<div class="dropdown-menu"></div>'),n.dropdown(l.dropdownOptions),this.off("click.autocomplete").click("click.autocomplete",function(e){0==a(n,l)&&(e.stopPropagation(),n.dropdown("hide"))}),this.off("keyup.autocomplete").keyup("keyup.autocomplete",function(){a(n,l)>0?n.dropdown("show"):n.click()}),this}}(jQuery);
